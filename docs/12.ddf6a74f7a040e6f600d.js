(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7UCR":function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",function(){return X});var r=i("ofXK"),n=i("tyNb"),b=i("JIr8"),s=i("fXoL"),c=i("VGjC"),a=i("XNvx");function o(e,t){1&e&&(s.Ob(0,"span"),s.kc(1,", "),s.Nb())}function u(e,t){if(1&e&&(s.Ob(0,"span"),s.ic(1,o,2,0,"span",11),s.kc(2),s.Nb()),2&e){const e=t.$implicit,i=t.index;s.zb(1),s.bc("ngIf",i>0),s.zb(1),s.lc(e.role.name)}}function l(e,t){if(1&e){const e=s.Pb();s.Ob(0,"div",4),s.Ob(1,"table",5),s.Ob(2,"thead"),s.Ob(3,"tr",6),s.Ob(4,"th",7),s.kc(5,"Name"),s.Nb(),s.Ob(6,"th",7),s.kc(7,"Value"),s.Nb(),s.Nb(),s.Nb(),s.Ob(8,"tbody"),s.Ob(9,"tr"),s.Ob(10,"th"),s.kc(11,"Username"),s.Nb(),s.Ob(12,"td"),s.kc(13),s.Nb(),s.Nb(),s.Ob(14,"tr"),s.Ob(15,"th"),s.kc(16,"Given Name"),s.Nb(),s.Ob(17,"td"),s.kc(18),s.Nb(),s.Nb(),s.Ob(19,"tr"),s.Ob(20,"th"),s.kc(21,"Family Name"),s.Nb(),s.Ob(22,"td"),s.kc(23),s.Nb(),s.Nb(),s.Ob(24,"tr"),s.Ob(25,"th"),s.kc(26,"Last Login"),s.Nb(),s.Ob(27,"td"),s.kc(28),s.Yb(29,"date"),s.Nb(),s.Nb(),s.Ob(30,"tr"),s.Ob(31,"th"),s.kc(32,"Previous Login"),s.Nb(),s.Ob(33,"td"),s.kc(34),s.Yb(35,"date"),s.Nb(),s.Nb(),s.Ob(36,"tr"),s.Ob(37,"th"),s.kc(38,"Roles"),s.Nb(),s.Ob(39,"td"),s.ic(40,u,3,2,"span",8),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(41,"div"),s.Ob(42,"button",9),s.kc(43,"Edit"),s.Nb(),s.Ob(44,"button",10),s.Vb("click",function(){return s.fc(e),s.Xb(2).deleteUser()}),s.kc(45,"Delete"),s.Nb(),s.Nb(),s.Nb()}if(2&e){const e=s.Xb().ngIf;s.zb(13),s.lc(e.username),s.zb(5),s.lc(e.givenName),s.zb(5),s.lc(e.familyName),s.zb(5),s.lc(s.ac(29,6,e.lastLoginDateTime,"yyyy-MM-dd HH:mm")),s.zb(6),s.lc(s.ac(35,9,e.previousLoginDateTime,"yyyy-MM-dd HH:mm")),s.zb(6),s.bc("ngForOf",e.userRoles)}}function m(e,t){1&e&&(s.Ob(0,"div",12),s.kc(1,"No record found."),s.Nb())}function d(e,t){if(1&e&&(s.Ob(0,"div"),s.ic(1,l,46,12,"div",2),s.ic(2,m,2,0,"ng-template",null,3,s.jc),s.Nb()),2&e){const e=t.ngIf,i=s.ec(3);s.zb(1),s.bc("ngIf",e)("ngIfElse",i)}}function f(e,t){if(1&e&&(s.Mb(0),s.Ob(1,"div",14),s.kc(2),s.Nb(),s.Lb()),2&e){const e=s.Xb(2);s.zb(2),s.lc(e.error)}}function g(e,t){1&e&&(s.Ob(0,"div"),s.kc(1,"Loading ..."),s.Nb())}function N(e,t){if(1&e&&(s.ic(0,f,3,1,"ng-container",0),s.ic(1,g,2,0,"ng-template",null,13,s.jc)),2&e){const e=s.ec(2),t=s.Xb();s.bc("ngIf",t.error)("ngIfElse",e)}}let h=(()=>{class e{constructor(e,t,i,r){this.userService=e,this.route=t,this.router=i,this.loginService=r,this.user$=null,this.error=null,this.deleteError=null}ngOnInit(){this.user$=this.userService.getCurrentUser().pipe(Object(b.a)(()=>this.router.navigate(["/login"])))}ngOnDestroy(){null!=this.deleteUserSubscription&&this.deleteUserSubscription.unsubscribe()}deleteUser(e){this.deleteUserSubscription=this.userService.deleteUser().subscribe(()=>{this.deleteError=!1,this.loginService.logOut(),this.userService.logOut(),this.router.navigate(["/login"])},()=>this.deleteError=!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(c.c),s.Jb(n.a),s.Jb(n.b),s.Jb(a.b))},e.\u0275cmp=s.Db({type:e,selectors:[["daja-user-detail"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loadingOrError",""],["class","table-responsive-sm",4,"ngIf","ngIfElse"],["notFound",""],[1,"table-responsive-sm"],[1,"table","table-sm"],[1,"table-secondary"],["scope","col"],[4,"ngFor","ngForOf"],["routerLink","/user/edit",1,"btn","btn-primary","m-1"],[1,"btn","btn-primary","m-1",3,"click"],[4,"ngIf"],[1,"alert","alert-warning"],["loading",""],[1,"alert","alert-danger"]],template:function(e,t){if(1&e&&(s.Ob(0,"h2"),s.kc(1,"User Detail"),s.Nb(),s.ic(2,d,4,2,"div",0),s.Yb(3,"async"),s.ic(4,N,3,2,"ng-template",null,1,s.jc)),2&e){const e=s.ec(5);s.zb(2),s.bc("ngIf",s.Zb(3,2,t.user$))("ngIfElse",e)}},directives:[r.k,r.j,n.c],pipes:[r.b,r.e],styles:[""]}),e})();var p=i("3Pt+"),v=i("z6cu"),O=i("lJxs");function y(e,t){1&e&&(s.Ob(0,"div",10),s.Ob(1,"strong"),s.kc(2,"Failed to update user!"),s.Nb(),s.kc(3," Please check the data. "),s.Nb())}function k(e,t){1&e&&(s.Ob(0,"div"),s.kc(1," Given name must be between 1 and 255 characters long. "),s.Nb())}function I(e,t){if(1&e&&(s.Ob(0,"div",10),s.ic(1,k,2,0,"div",11),s.Nb()),2&e){const e=s.Xb(2);s.zb(1),s.bc("ngIf",e.givenName.errors.required||e.givenName.errors.minlength||e.givenName.errors.maxlength)}}function E(e,t){1&e&&(s.Ob(0,"div"),s.kc(1," Family name must be between 1 and 255 characters long. "),s.Nb())}function U(e,t){if(1&e&&(s.Ob(0,"div",10),s.ic(1,E,2,0,"div",11),s.Nb()),2&e){const e=s.Xb(2);s.zb(1),s.bc("ngIf",e.familyName.errors.required||e.familyName.errors.minlength||e.familyName.errors.maxlength)}}function j(e,t){if(1&e){const e=s.Pb();s.Ob(0,"div"),s.ic(1,y,4,0,"div",2),s.Ob(2,"form",3),s.Vb("ngSubmit",function(){return s.fc(e),s.Xb().updateUser()}),s.Ob(3,"div",4),s.Ob(4,"label",5),s.kc(5,"Given Name"),s.Nb(),s.Kb(6,"input",6),s.ic(7,I,2,1,"div",2),s.Nb(),s.Ob(8,"div",4),s.Ob(9,"label",7),s.kc(10,"Family Name"),s.Nb(),s.Kb(11,"input",8),s.ic(12,U,2,1,"div",2),s.Nb(),s.Ob(13,"button",9),s.kc(14,"Save"),s.Nb(),s.Nb(),s.Nb()}if(2&e){const e=s.Xb();s.zb(1),s.bc("ngIf",e.userUpdateError),s.zb(1),s.bc("formGroup",e.userEditForm),s.zb(5),s.bc("ngIf",e.givenName.invalid&&(e.givenName.dirty||e.givenName.touched)),s.zb(5),s.bc("ngIf",e.familyName.invalid&&(e.familyName.dirty||e.familyName.touched)),s.zb(1),s.bc("disabled",e.userEditForm.invalid)}}function z(e,t){if(1&e&&(s.Mb(0),s.Ob(1,"div",10),s.kc(2),s.Nb(),s.Lb()),2&e){const e=s.Xb(2);s.zb(2),s.lc(e.error)}}function S(e,t){1&e&&(s.Ob(0,"div"),s.kc(1,"Loading ..."),s.Nb())}function L(e,t){if(1&e&&(s.ic(0,z,3,1,"ng-container",0),s.ic(1,S,2,0,"ng-template",null,12,s.jc)),2&e){const e=s.ec(2),t=s.Xb();s.bc("ngIf",t.error)("ngIfElse",e)}}const F=[{path:"",component:h},{path:"edit",component:(()=>{class e{constructor(e,t,i){this.fb=e,this.router=t,this.userService=i,this.userUpdateError=!1,this.error=null,this.user$=null,this.userObject=null,this.userEditForm=this.fb.group({givenName:[null,[p.i.required,p.i.minLength(1),p.i.maxLength(255)]],familyName:[null,[p.i.required,p.i.minLength(1),p.i.maxLength(255)]]})}ngOnInit(){this.user$=this.userService.getCurrentUser().pipe(Object(O.a)(e=>(this.userObject=e,this.userEditForm.patchValue({givenName:e.givenName,familyName:e.familyName}),e)),Object(b.a)(e=>(this.error=e,Object(v.a)(e))))}updateUser(){const e=new c.b(this.userObject.username,this.userObject.lastLoginDateTime,this.userObject.previousLoginDateTime,this.userEditForm.get("givenName").value,this.userEditForm.get("familyName").value,this.userObject.userRoles);this.userUpdateSubscription=this.userService.updateUser(e).subscribe(()=>{this.userUpdateError=!1,this.router.navigate(["/user"])},()=>this.userUpdateError=!0)}get givenName(){return this.userEditForm.get("givenName")}get familyName(){return this.userEditForm.get("familyName")}ngOnDestroy(){null!=this.userUpdateSubscription&&this.userUpdateSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(p.b),s.Jb(n.b),s.Jb(c.c))},e.\u0275cmp=s.Db({type:e,selectors:[["daja-user-edit"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loadingOrError",""],["class","alert alert-danger",4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","givenName"],["type","text","formControlName","givenName",1,"form-control"],["for","familyName"],["type","text","formControlName","familyName",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[4,"ngIf"],["loading",""]],template:function(e,t){if(1&e&&(s.Ob(0,"h2"),s.kc(1,"Edit User"),s.Nb(),s.ic(2,j,15,5,"div",0),s.Yb(3,"async"),s.ic(4,L,3,2,"ng-template",null,1,s.jc)),2&e){const e=s.ec(5);s.zb(2),s.bc("ngIf",s.Zb(3,2,t.user$))("ngIfElse",e)}},directives:[r.k,p.j,p.f,p.d,p.a,p.e,p.c],pipes:[r.b],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({imports:[[n.f.forChild(F)],n.f]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({imports:[[r.c,w,p.h]]}),e})()}}]);