(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{dTRx:function(e,r,t){"use strict";t.r(r),t.d(r,"RegistrationUserModule",function(){return I});var i=t("ofXK"),n=t("tyNb"),s=t("3Pt+"),o=t("JIr8"),a=t("AytR"),b=t("fXoL"),m=t("tk/3"),c=t("DbDQ");let g=(()=>{class e{constructor(e,r){this.http=e,this.errorResponseService=r,this.registrationUserUrl="register"}registerUser(e){return this.http.post(a.a.SERVER_URL+this.registrationUserUrl,e).pipe(Object(o.a)(this.errorResponseService.handleError))}}return e.\u0275fac=function(r){return new(r||e)(b.Sb(m.b),b.Sb(c.a))},e.\u0275prov=b.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class u{constructor(e,r,t,i){this.username=e,this.password=r,this.givenName=t,this.familyName=i}}var l=t("XNvx"),d=t("bOdf");function f(e,r){1&e&&(b.Ob(0,"div",12),b.Ob(1,"strong"),b.kc(2,"Failed to register!"),b.Nb(),b.kc(3," Please check your username and password.\n"),b.Nb())}function h(e,r){1&e&&(b.Ob(0,"div"),b.kc(1," Username must be between 1 and 255 characters long. "),b.Nb())}function v(e,r){if(1&e&&(b.Ob(0,"div",12),b.ic(1,h,2,0,"div",13),b.Nb()),2&e){const e=b.Xb();b.zb(1),b.bc("ngIf",e.username.errors.required||e.username.errors.minlength||e.username.errors.maxlength)}}function p(e,r){1&e&&(b.Ob(0,"div"),b.kc(1," Password must be between 4 and 100 characters long. "),b.Nb())}function N(e,r){if(1&e&&(b.Ob(0,"div",12),b.ic(1,p,2,0,"div",13),b.Nb()),2&e){const e=b.Xb();b.zb(1),b.bc("ngIf",e.password.errors.required||e.password.errors.minlength||e.password.errors.maxlength)}}function w(e,r){1&e&&(b.Ob(0,"div"),b.kc(1," Given name must be between 1 and 255 characters long. "),b.Nb())}function y(e,r){if(1&e&&(b.Ob(0,"div",12),b.ic(1,w,2,0,"div",13),b.Nb()),2&e){const e=b.Xb();b.zb(1),b.bc("ngIf",e.givenName.errors.required||e.givenName.errors.minlength||e.givenName.errors.maxlength)}}function U(e,r){1&e&&(b.Ob(0,"div"),b.kc(1," Family name must be between 1 and 255 characters long. "),b.Nb())}function O(e,r){if(1&e&&(b.Ob(0,"div",12),b.ic(1,U,2,0,"div",13),b.Nb()),2&e){const e=b.Xb();b.zb(1),b.bc("ngIf",e.familyName.errors.required||e.familyName.errors.minlength||e.familyName.errors.maxlength)}}const k=[{path:"",component:(()=>{class e{constructor(e,r,t,i){this.fb=e,this.router=r,this.registrationUserService=t,this.loginService=i,this.registrationUserError=!1,this.registrationUserForm=this.fb.group({username:[null,[s.i.required,s.i.minLength(1),s.i.maxLength(255)]],password:[null,[s.i.required,s.i.minLength(4),s.i.maxLength(100)]],givenName:[null,[s.i.required,s.i.minLength(1),s.i.maxLength(255)]],familyName:[null,[s.i.required,s.i.minLength(1),s.i.maxLength(255)]]})}ngOnInit(){this.loginService.getJwtToken()&&this.router.navigate([""])}register(){const e=new u(this.registrationUserForm.get("username").value,this.registrationUserForm.get("password").value,this.registrationUserForm.get("givenName").value,this.registrationUserForm.get("familyName").value);this.registrationUserSubscription=this.registrationUserService.registerUser(e).pipe(Object(d.a)(()=>this.loginService.logIn(new l.a(e.username,e.password)))).subscribe(()=>{this.registrationUserError=!1,this.router.navigate([""])},()=>this.registrationUserError=!0)}get username(){return this.registrationUserForm.get("username")}get password(){return this.registrationUserForm.get("password")}get givenName(){return this.registrationUserForm.get("givenName")}get familyName(){return this.registrationUserForm.get("familyName")}ngOnDestroy(){null!=this.registrationUserSubscription&&this.registrationUserSubscription.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(b.Jb(s.b),b.Jb(n.b),b.Jb(g),b.Jb(l.b))},e.\u0275cmp=b.Db({type:e,selectors:[["daja-registration-user"]],decls:26,vars:7,consts:[["class","alert alert-danger",4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","formControlName","username",1,"form-control"],["for","password"],["type","password","formControlName","password",1,"form-control"],["for","givenName"],["type","text","formControlName","givenName",1,"form-control"],["for","familyName"],["type","text","formControlName","familyName",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(e,r){1&e&&(b.Ob(0,"h2"),b.kc(1,"User Registration"),b.Nb(),b.ic(2,f,4,0,"div",0),b.Ob(3,"form",1),b.Vb("ngSubmit",function(){return r.register()}),b.Ob(4,"div",2),b.Ob(5,"label",3),b.kc(6,"Username"),b.Nb(),b.Kb(7,"input",4),b.ic(8,v,2,1,"div",0),b.Nb(),b.Ob(9,"div",2),b.Ob(10,"label",5),b.kc(11,"Password"),b.Nb(),b.Kb(12,"input",6),b.ic(13,N,2,1,"div",0),b.Nb(),b.Ob(14,"div",2),b.Ob(15,"label",7),b.kc(16,"Given Name"),b.Nb(),b.Kb(17,"input",8),b.ic(18,y,2,1,"div",0),b.Nb(),b.Ob(19,"div",2),b.Ob(20,"label",9),b.kc(21,"Family Name"),b.Nb(),b.Kb(22,"input",10),b.ic(23,O,2,1,"div",0),b.Nb(),b.Ob(24,"button",11),b.kc(25,"Register"),b.Nb(),b.Nb()),2&e&&(b.zb(2),b.bc("ngIf",r.registrationUserError),b.zb(1),b.bc("formGroup",r.registrationUserForm),b.zb(5),b.bc("ngIf",r.username.invalid&&(r.username.dirty||r.username.touched)),b.zb(5),b.bc("ngIf",r.password.invalid&&(r.password.dirty||r.password.touched)),b.zb(5),b.bc("ngIf",r.givenName.invalid&&(r.givenName.dirty||r.givenName.touched)),b.zb(5),b.bc("ngIf",r.familyName.invalid&&(r.familyName.dirty||r.familyName.touched)),b.zb(1),b.bc("disabled",r.registrationUserForm.invalid))},directives:[i.k,s.j,s.f,s.d,s.a,s.e,s.c],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[n.f.forChild(k)],n.f]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[i.c,F,s.h]]}),e})()}}]);